---
import { Icon } from "astro-icon/components"
import FigureBox from "$components/image-wrapper/FigureBox.astro"

interface Props {
  url: string
  title: string
  result: ImageMetadata
  alt?: string
}

const { url, title, result, alt = "" } = Astro.props
---

<div class="DemoLinkWithResult">
  <div class="demo-icon">
    <Icon name="carbon:executable-program" size={50} />
    <span class="label">demo</span>
  </div>
  <a class="demo-link no-marker" href={url} target="_blank" rel="noopener noreferrer">
    {title}
    <Icon class="external-icon" name="iconamoon:arrow-top-right-3-square-thin" size={30} stroke-width={1.5} />
  </a>
  <div class="result-image"><FigureBox src={result} alt={alt} /></div>
</div>

<style>
  .DemoLinkWithResult {
    --theme-color: rgb(141 223 203);

    display: grid;
    grid-template-columns: minmax(0, calc(50px + 0.7em * 2)) auto;
    grid-template-rows: 1fr auto;
    border: 2px solid var(--theme-color);
    border-radius: 1rem;
    border-top-right-radius: 0;
  }

  .demo-link {
    display: flex;
    align-items: center;
    justify-content: center;
    padding-inline-end: 30px;
    font-weight: bold;
    font-size: 0.9em;
    color: light-dark(var(--slate-500), var(--slate-200));
    grid-column: 2;
    position: relative;
  }

  .demo-link::after {
    display: none;
  }

  .demo-icon {
    display: grid;
    justify-self: flex-start;
    padding: 0.5em 0.7em;
    padding-block-end: 0;
    color: var(--theme-color);
    place-items: center;
    font-weight: bold;
    font-size: 0.9em;
  }

  .label {
    translate: 0 -0.5em;
  }

  .external-icon {
    position: absolute;
    top: 0;
    right: 0;
    color: var(--theme-color);
  }

  .result-image {
    display: flex;
    grid-row: 2;
    grid-column: 2;
    padding-inline-end: 1em;
    padding-block-end: 1em;
  }

  @media (max-width: 640px) {
    .result-image {
      padding-inline: 1em;
      grid-column: span 2;
    }
  }
</style>
